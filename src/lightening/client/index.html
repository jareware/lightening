<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, height=device-height" />
  <title>Lightening</title>
  <style type="text/css">
    body {
      font-family: "Lucida Grande", Tahoma, Verdana, Arial, Sans-Serif;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <pre></pre>
  <script>
    var pre = document.querySelector('pre');
    var url = location.protocol.replace(/^http/, 'ws') + '//' + location.hostname + ':' + (location.port + 1);
    var socket = new WebSocket('ws://localhost:8081');
    socket.onopen = function (evt) { console.log('WebSocket opened', evt) };
    socket.onclose = function (evt) { console.log('WebSocket closed', evt) };
    socket.onerror = function (evt) { console.log('WebSocket error', evt) };
    socket.onmessage = function (evt) { console.log('WebSocket message', evt); pre.innerText = evt.data };
    console.log('Hello World!');
  </script>
</body>

</html>
