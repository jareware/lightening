#!/bin/bash

set -euo pipefail # exit on error; treat unset variables as errors; exit on errors in piped commands

npm run build:client
mv build client-build
npm run build:server
mv client-build build

# To start server process immediately after:
# node build/server.js

docker buildx build --platform linux/arm -t ghcr.io/jareware/lightening:latest .
docker push ghcr.io/jareware/lightening:latest
